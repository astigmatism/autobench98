services:
  orchestrator:
    build:
      context: .
      dockerfile: services/orchestrator/Dockerfile.dev
    env_file: .env
    environment:
      - DATA_DIR=/app/data
    volumes:
      - ./data/orchestrator:/app/data
    ports:
      - "3000:3000"
    # ðŸ‘‡ Map the host serial device into the container (Linux only).
    #    start-linux.sh sets SERIAL_DEVICE (e.g., /dev/ttyACM0 or /dev/ttyUSB0)
    devices:
      - "${SERIAL_DEVICE}:${SERIAL_DEVICE}"
    container_name: autobench98_orchestrator

  sidecar-ffmpeg:
    build:
      context: .
      dockerfile: services/sidecar-ffmpeg/Dockerfile.dev
    env_file: .env
    ports:
      - "3100:3100"
    container_name: autobench98_sidecar