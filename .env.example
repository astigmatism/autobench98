################################################################################
# AutoBench98 Environment Example
# Copy to .env and adjust per environment (dev, stage, prod)
################################################################################

# ------------------------------------------------------------------------------
# Global settings
# ------------------------------------------------------------------------------
NODE_ENV=development             # Node environment: development | production | test

# ------------------------------------------------------------------------------
# Orchestrator service
# ------------------------------------------------------------------------------
API_PORT=3000                    # HTTP port for orchestrator
API_HOST=0.0.0.0                 # Bind address
LOG_LEVEL=info                   # Default orchestrator log level
PRETTY_LOGS=true                 # Pretty-print logs to console (true = human readable)

# ------------------------------------------------------------------------------
# Sidecar service
# ------------------------------------------------------------------------------
SIDECAR_PORT=3100                # HTTP port for sidecar
SIDECAR_HOST=0.0.0.0             # Bind address for sidecar

# ------------------------------------------------------------------------------
# Request logging controls
# ------------------------------------------------------------------------------
REQUEST_VERBOSE=false            # true -> include debug blocks with id/ip and optional headers
REQUEST_LOG_HEADERS=false        # true -> include a safe subset of headers (no auth/cookies)
REQUEST_SAMPLE=1                 # N -> log every Nth request (sampling factor)

# ------------------------------------------------------------------------------
# WebSocket log streaming controls (server â†’ client)
# ------------------------------------------------------------------------------
LOG_CHANNEL_ALLOWLIST=websocket,app,request,sidecar   # Channels exposed to WS clients
LOG_LEVEL_MIN=debug               # Minimum level forwarded (debug|info|warn|error|fatal)
LOG_REDACT_REGEX=                 # Regex (JS) to redact sensitive data (e.g., Bearer tokens)
CLIENT_LOGS_SNAPSHOT=500          # How many recent log entries to send to new clients
CLIENT_LOGS_CAPACITY=5000          # Suggested client-side ring buffer size (server-driven cap)

# ------------------------------------------------------------------------------
# External log ingestion (for sidecar or other processes)
# ------------------------------------------------------------------------------
LOG_INGEST_TOKEN=devtoken        # Optional bearer token for POST /api/logs/ingest (empty = disabled)
LOG_INGEST_ALLOWED_CHANNELS=sidecar,ffmpeg,device,ocr,stream,benchmark  # Channels accepted for ingestion

# ------------------------------------------------------------------------------
# Sidecar â†’ Orchestrator log forwarding
# ------------------------------------------------------------------------------
ORCH_INGEST_URL=http://orchestrator:3000/api/logs/ingest  # Full URL to orchestrator ingestion endpoint
ORCH_INGEST_TOKEN=devtoken        # Token used by sidecar to authenticate (must match LOG_INGEST_TOKEN)

# ------------------------------------------------------------------------------
# WebSocket server â€” heartbeat logging (optional)
# ------------------------------------------------------------------------------
WS_HEARTBEAT_LOG=true            # If true, log ðŸ’“ heartbeat pongs to the WS log channel

# ------------------------------------------------------------------------------
# WebSocket client (Studio) â€” values SOURCE THE SERVER CONFIG (server-owned)
# The orchestrator reads these and exposes them via state.serverConfig.ws.
# ------------------------------------------------------------------------------
VITE_WS_HEARTBEAT_INTERVAL_MS=10000   # Client ping cadence (ms)
VITE_WS_HEARTBEAT_TIMEOUT_MS=5000     # Time to wait for server pong before reconnect (ms)
VITE_WS_RECONNECT_ENABLED=true        # Auto-reconnect when disconnected
VITE_WS_RECONNECT_MIN_MS=1000         # Minimum reconnect backoff delay (ms)
VITE_WS_RECONNECT_MAX_MS=15000        # Maximum reconnect backoff delay (ms)
VITE_WS_RECONNECT_FACTOR=1.8          # Exponential backoff factor
VITE_WS_RECONNECT_JITTER=0.2          # Jitter fraction (0..1) applied to backoff